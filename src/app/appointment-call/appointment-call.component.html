<div *ngIf="loading" class="loader">
  <md-spinner></md-spinner>
</div>

<div *ngIf="!loading && !error && !initiated">

  <div class="center">
    <div *ngIf="!appointment">
      <md-icon>access_time</md-icon>
      <p>No appointment scheduled for you right now</p>
    </div>
    <div *ngIf="appointment">
      <div>
        <img avatar [hash]="appointment.user.gravatarHash" class="profile-img">
        <p class="user-name"><b>{{appointment.user.name}}</b></p>
        <p>{{ parseHour(appointment.hour) }}</p>
      </div>
      <button
        md-raised-button
        color="primary"
        (click)="initiateAppointment()"
      >
        Join the Appointment
      </button>
      <p>or use Google Hangouts alternatively</p>
      <div id="hangout-button"></div>
    </div>
  </div>
</div>

<!-- error & closing screen -->
<div *ngIferror || ended" class="center">
  <md-icon *ngIf="error">error</md-icon>
  <md-icon *ngIf="ended">call_end</md-icon>
  <p *ngIf="error">{{error}}</p>
  <p *ngIf="ended">appointment is over</p>
  <button
    md-raised-button
    color="primary"
    (click)="reset()"
  >
    Go back
  </button>
</div>

<videochat
  *ngIf="initiated && !error && !ended"
  (error)="showError($event)"
  (ended)="showEndingScreen()"
  class="flexbox-parent"
></videochat>

