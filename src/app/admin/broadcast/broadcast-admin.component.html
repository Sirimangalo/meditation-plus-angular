<button
  md-fab
  color="accent"
  (click)="start()"
  *ngIf="!activeBroadcast"
>
  <md-icon>play_arrow</md-icon>
</button>
<button
  md-fab
  color="accent"
  (click)="stop()"
  *ngIf="activeBroadcast"
>
  <md-icon>stop</md-icon>
</button>

<md-card>
  <md-card-title>Broadcast Settings</md-card-title>
  <md-spinner *ngIf="loadingSettings"></md-spinner>
  <form *ngIf="!loadingSettings" (submit)="updateLivestreamInfo($event)">
    <div class="flex">
      <md-input-container class="fill">
        <textarea
          mdInput
          mdTextareaAutosize
          rows="10"
          name="inp-livestreaminfo"
          [(ngModel)]="livestreamInfo"
          placeholder="Information text displayed on livestream page"
        ></textarea>
      </md-input-container>
    </div>

    <p *ngIf="settingsError">{{ settingsError }}</p>

    <button
      md-raised-button
      color="primary"
      type="submit"
      [disabled]="loadingSubmit"
    >
      <md-spinner
        *ngIf="loadingSubmit"
        class="in-button-spinner">
      </md-spinner>
      Update
    </button>
  </form>
</md-card>

<div class="broadcast-list">
  <md-card *ngFor="let broadcast of broadcasts">
    <md-card-title>
      Created {{ broadcast.createdAt| amDateFormat:'YYYY-MM-DD HH:mm:ss' }}
    </md-card-title>
    <md-card-subtitle *ngIf="broadcast.started">
      <div>Started {{ broadcast.started| amDateFormat:'YYYY-MM-DD HH:mm:ss' }}</div>
      <div *ngIf="broadcast.ended">Ended {{ broadcast.ended| amDateFormat:'YYYY-MM-DD HH:mm:ss' }}</div>
      <div>Link: <b>{{ broadcast.videoUrl ? 'Yes' : 'No' }}</b></div>
    </md-card-subtitle>

    <md-card-content>
      <button
        md-raised-button
        color="primary"
        [routerLink]="['/admin/broadcasts/', broadcast._id]"
      >
        Edit
      </button>

      <button
        md-raised-button
        color="warning"
        (click)="delete($event, broadcast)"
      >
        Remove
      </button>
    </md-card-content>
  </md-card>
</div>
